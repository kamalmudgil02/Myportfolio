<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resume Uploader â€” Admin</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #0B0F19;
            color: #E5E7EB;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .card {
            background: #111827;
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 1rem;
            padding: 2.5rem;
            max-width: 540px;
            width: 100%;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.75rem;
        }

        .card-header .icon {
            width: 52px;
            height: 52px;
            background: linear-gradient(135deg, #3B82F6, #8B5CF6);
            border-radius: 0.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
            color: white;
            flex-shrink: 0;
        }

        .card-header h1 {
            font-size: 1.4rem;
            font-weight: 700;
        }

        .card-header p {
            font-size: 0.85rem;
            color: #6B7280;
            margin-top: 0.2rem;
        }

        /* Drop Zone */
        .drop-zone {
            border: 2px dashed rgba(59, 130, 246, 0.4);
            border-radius: 0.75rem;
            padding: 3rem 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.25s ease;
            background: rgba(59, 130, 246, 0.03);
            position: relative;
            margin-bottom: 1.5rem;
        }

        .drop-zone:hover,
        .drop-zone.drag-over {
            border-color: #3B82F6;
            background: rgba(59, 130, 246, 0.08);
            transform: scale(1.01);
        }

        .drop-zone input[type="file"] {
            position: absolute;
            inset: 0;
            opacity: 0;
            cursor: pointer;
            width: 100%;
            height: 100%;
        }

        .drop-zone .dz-icon {
            font-size: 2.5rem;
            color: #3B82F6;
            margin-bottom: 1rem;
        }

        .drop-zone h3 {
            font-size: 1.05rem;
            font-weight: 600;
            margin-bottom: 0.4rem;
        }

        .drop-zone p {
            font-size: 0.85rem;
            color: #6B7280;
        }

        .drop-zone .or-badge {
            display: inline-block;
            background: rgba(59, 130, 246, 0.15);
            color: #3B82F6;
            padding: 0.2rem 0.7rem;
            border-radius: 2rem;
            font-size: 0.75rem;
            font-weight: 600;
            margin: 0.75rem 0 0.75rem;
        }

        /* File Preview */
        .file-preview {
            display: none;
            align-items: center;
            gap: 1rem;
            background: rgba(16, 185, 129, 0.08);
            border: 1px solid rgba(16, 185, 129, 0.3);
            border-radius: 0.75rem;
            padding: 1rem 1.25rem;
            margin-bottom: 1.5rem;
        }

        .file-preview.visible {
            display: flex;
        }

        .file-preview .pdf-icon {
            font-size: 2rem;
            color: #EF4444;
            flex-shrink: 0;
        }

        .file-preview .file-details {
            flex: 1;
            min-width: 0;
        }

        .file-preview .file-name {
            font-weight: 600;
            font-size: 0.95rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .file-preview .file-size {
            font-size: 0.8rem;
            color: #10B981;
            margin-top: 0.2rem;
        }

        .file-preview .remove-btn {
            background: none;
            border: none;
            color: #6B7280;
            cursor: pointer;
            font-size: 1rem;
            padding: 0.25rem;
            transition: color 0.2s;
        }

        .file-preview .remove-btn:hover {
            color: #EF4444;
        }

        /* Buttons */
        .btn-save {
            width: 100%;
            padding: 0.9rem;
            background: linear-gradient(135deg, #10B981, #059669);
            color: white;
            border: none;
            border-radius: 0.6rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.6rem;
            transition: all 0.25s ease;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
            margin-bottom: 1rem;
        }

        .btn-save:disabled {
            background: #374151;
            box-shadow: none;
            cursor: not-allowed;
            color: #6B7280;
        }

        .btn-save:not(:disabled):hover {
            background: linear-gradient(135deg, #059669, #047857);
            transform: translateY(-1px);
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
        }

        /* Status messages */
        .status {
            display: none;
            text-align: center;
            padding: 0.75rem 1rem;
            border-radius: 0.6rem;
            font-size: 0.9rem;
            font-weight: 500;
            margin-bottom: 1rem;
        }

        .status.success {
            display: block;
            background: rgba(16, 185, 129, 0.12);
            color: #10B981;
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        .status.error {
            display: block;
            background: rgba(239, 68, 68, 0.1);
            color: #EF4444;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        /* Info box */
        .info-box {
            display: flex;
            gap: 0.75rem;
            align-items: flex-start;
            background: rgba(59, 130, 246, 0.06);
            border: 1px solid rgba(59, 130, 246, 0.15);
            border-radius: 0.6rem;
            padding: 0.9rem 1rem;
            margin-top: 1rem;
        }

        .info-box i {
            color: #3B82F6;
            margin-top: 1px;
            flex-shrink: 0;
        }

        .info-box p {
            font-size: 0.825rem;
            color: #9CA3AF;
            line-height: 1.5;
        }

        .info-box p strong {
            color: #E5E7EB;
        }

        /* Fallback manual method */
        .fallback {
            margin-top: 1.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.07);
            padding-top: 1.5rem;
        }

        .fallback h4 {
            font-size: 0.85rem;
            font-weight: 600;
            color: #9CA3AF;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .steps {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .step {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 0.85rem;
            color: #9CA3AF;
        }

        .step .num {
            width: 22px;
            height: 22px;
            background: rgba(59, 130, 246, 0.15);
            color: #3B82F6;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 700;
            flex-shrink: 0;
        }

        code {
            background: rgba(59, 130, 246, 0.12);
            color: #60A5FA;
            padding: 0.1rem 0.4rem;
            border-radius: 0.3rem;
            font-size: 0.82rem;
        }

        .back-link {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.85rem;
            color: #6B7280;
            text-decoration: none;
            margin-top: 1.5rem;
            transition: color 0.2s;
        }

        .back-link:hover {
            color: #3B82F6;
        }
    </style>
</head>

<body>

    <div class="card">
        <div class="card-header">
            <div class="icon"><i class="fas fa-file-arrow-up"></i></div>
            <div>
                <h1>Resume Uploader</h1>
                <p>Portfolio Admin Panel</p>
            </div>
        </div>

        <!-- Drop Zone -->
        <div class="drop-zone" id="dropZone">
            <input type="file" id="fileInput" accept="application/pdf">
            <div class="dz-icon"><i class="fas fa-cloud-arrow-up"></i></div>
            <h3>Drop your Resume PDF here</h3>
            <span class="or-badge">OR</span>
            <p>Click to browse and select a file</p>
        </div>

        <!-- File Preview -->
        <div class="file-preview" id="filePreview">
            <i class="fas fa-file-pdf pdf-icon"></i>
            <div class="file-details">
                <div class="file-name" id="fileName">resume.pdf</div>
                <div class="file-size" id="fileSize"></div>
            </div>
            <button class="remove-btn" id="removeBtn" title="Remove file">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <!-- Status -->
        <div class="status" id="status"></div>

        <!-- Save Button -->
        <button class="btn-save" id="saveBtn" disabled>
            <i class="fas fa-floppy-disk"></i>
            Save as resume.pdf
        </button>

        <div class="info-box">
            <i class="fas fa-circle-info"></i>
            <p>
                This saves your PDF as <strong>resume.pdf</strong> directly into the portfolio folder using your
                browser.
                After saving, <strong>push to GitHub</strong> so the download button on your live site works.
            </p>
        </div>

        <!-- Manual fallback -->
        <div class="fallback">
            <h4><i class="fas fa-wrench"></i> Manual Method (Always Works)</h4>
            <div class="steps">
                <div class="step">
                    <span class="num">1</span>
                    Rename your resume file to <code>resume.pdf</code>
                </div>
                <div class="step">
                    <span class="num">2</span>
                    Copy it into <code>portfolio/</code> folder (same folder as this file)
                </div>
                <div class="step">
                    <span class="num">3</span>
                    Run <code>git add -A</code> &amp; <code>git push</code>
                </div>
            </div>
        </div>

        <a href="index.html" class="back-link">
            <i class="fas fa-arrow-left"></i> Back to Portfolio
        </a>
    </div>

    <script>
        const dropZone = document.getElementById('dropZone');
        const fileInput = document.getElementById('fileInput');
        const filePreview = document.getElementById('filePreview');
        const fileName = document.getElementById('fileName');
        const fileSize = document.getElementById('fileSize');
        const removeBtn = document.getElementById('removeBtn');
        const saveBtn = document.getElementById('saveBtn');
        const status = document.getElementById('status');

        let selectedFile = null;

        // Format bytes
        function fmtSize(bytes) {
            if (bytes < 1024) return bytes + ' B';
            if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';
            return (bytes / (1024 * 1024)).toFixed(2) + ' MB';
        }

        function showStatus(msg, type) {
            status.textContent = msg;
            status.className = 'status ' + type;
        }

        function clearStatus() {
            status.className = 'status';
        }

        function setFile(file) {
            if (!file || file.type !== 'application/pdf') {
                showStatus('âš ï¸ Please select a valid PDF file.', 'error');
                return;
            }
            selectedFile = file;
            fileName.textContent = file.name;
            fileSize.textContent = fmtSize(file.size);
            filePreview.classList.add('visible');
            saveBtn.disabled = false;
            clearStatus();
        }

        function clearFile() {
            selectedFile = null;
            fileInput.value = '';
            filePreview.classList.remove('visible');
            saveBtn.disabled = true;
            clearStatus();
        }

        // File input
        fileInput.addEventListener('change', () => {
            if (fileInput.files[0]) setFile(fileInput.files[0]);
        });

        // Drag events
        ['dragenter', 'dragover'].forEach(evt => {
            dropZone.addEventListener(evt, e => {
                e.preventDefault();
                dropZone.classList.add('drag-over');
            });
        });
        ['dragleave', 'drop'].forEach(evt => {
            dropZone.addEventListener(evt, e => {
                dropZone.classList.remove('drag-over');
            });
        });
        dropZone.addEventListener('drop', e => {
            e.preventDefault();
            const file = e.dataTransfer.files[0];
            setFile(file);
        });

        // Remove
        removeBtn.addEventListener('click', clearFile);

        // Save using File System Access API
        saveBtn.addEventListener('click', async () => {
            if (!selectedFile) return;

            // Try File System Access API (Chrome/Edge)
            if ('showSaveFilePicker' in window) {
                try {
                    const fileHandle = await window.showSaveFilePicker({
                        suggestedName: 'resume.pdf',
                        types: [{ description: 'PDF', accept: { 'application/pdf': ['.pdf'] } }]
                    });
                    const writable = await fileHandle.createWritable();
                    await writable.write(selectedFile);
                    await writable.close();
                    showStatus('âœ… resume.pdf saved successfully! Push to GitHub to update your live site.', 'success');
                } catch (err) {
                    if (err.name !== 'AbortError') {
                        // Fallback: just download
                        downloadFallback();
                    }
                }
            } else {
                // Fallback for unsupported browsers
                downloadFallback();
            }
        });

        function downloadFallback() {
            const url = URL.createObjectURL(selectedFile);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'resume.pdf';
            a.click();
            URL.revokeObjectURL(url);
            showStatus('ðŸ“¥ Downloaded! Move resume.pdf into your portfolio folder and push to GitHub.', 'success');
        }
    </script>

</body>

</html>